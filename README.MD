# å®æ—¶å¿ƒç‡ç›‘æµ‹ç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºGoè¯­è¨€å¼€å‘çš„å®æ—¶å¿ƒç‡æ•°æ®ç›‘æµ‹ä¸å…±äº«ç³»ç»Ÿï¼Œæä¾›å®‰å…¨å¯é çš„APIç«¯ç‚¹ç”¨äºæ•°æ®ä¸ŠæŠ¥ã€æŸ¥è¯¢åŠå¯è§†åŒ–å±•ç¤ºã€‚é‡‡ç”¨Rediså®æ—¶å­˜å‚¨ã€GORMå…³ç³»æ˜ å°„ï¼Œæ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²ã€‚

## ğŸ–ï¸ æœåŠ¡å™¨èµåŠ©å•†

[![SponsorName](https://img.shields.io/badge/Powered_by-æ…ˆäº‘æ•°æ®-blue?style=for-the-badge&logo=aws)](https://www.zovps.com/)
![Image](/static/sponsors/ciyun.png)

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·è®¤è¯ä½“ç³»

* åŸºäºå®‰å…¨Cookieçš„è®¤è¯
* è‡ªåŠ¨ç»­æœŸæœºåˆ¶

### å¿ƒç‡æ•°æ®ç®¡ç†

* å®æ—¶æ•°æ®ä¸ŠæŠ¥ï¼ˆæ”¯æŒæ¯«ç§’çº§æ—¶é—´æˆ³ï¼‰
* å†å²æ•°æ®æŸ¥è¯¢ï¼ˆåŸºäºRedisæœ‰åºé›†åˆï¼‰
* æ•°æ®æœ‰æ•ˆæ€§éªŒè¯ï¼ˆ1-250 BPMèŒƒå›´é™åˆ¶ï¼‰

### å®‰å…¨å…±äº«æœºåˆ¶

* UUIDåŠ å¯†è®¿é—®æ§åˆ¶
* ä¸´æ—¶è®¿é—®ä»¤ç‰Œ

## ğŸŒ APIç«¯ç‚¹æ–‡æ¡£

### è®¤è¯ç›¸å…³

| ç«¯ç‚¹        | æ–¹æ³•   | æè¿°         | è¯·æ±‚ä½“ç¤ºä¾‹                                         |
|-----------|------|------------|-----------------------------------------------|
| /register | POST | ç”¨æˆ·æ³¨å†Œ       | `{"username":"test","password":"test123456"}` |
| /login    | POST | ç”¨æˆ·ç™»å½•       | åŒä¸Š                                            |
| /logout   | POST | é€€å‡ºç™»å½•       | æ—                                              |
| /uuid     | GET  | è·å–å½“å‰ç”¨æˆ·UUID | éœ€è®¤è¯                                           |

### æ•°æ®æ“ä½œ

| ç«¯ç‚¹                             | æ–¹æ³•   | æè¿°           | å‚æ•°ç¤ºä¾‹                                                     |
|--------------------------------|------|--------------|----------------------------------------------------------|
| /receive_data                  | POST | è®¤è¯ç”¨æˆ·ä¸ŠæŠ¥æ•°æ®     | `{"data":{"heart_rate":72},"measured_at":1711700000000}` |
| /uuid/{uuid}/receive_data      | POST | é€šè¿‡UUIDä¸ŠæŠ¥æ•°æ®   | åŒä¸Š                                                       |
| /latest-heart-rate             | GET  | è·å–æœ€æ–°å¿ƒç‡ï¼ˆè®¤è¯ç”¨æˆ·ï¼‰ | æ—                                                         |
| /uuid/{uuid}/latest-heart-rate | GET  | è·å–æŒ‡å®šUUIDæœ€æ–°æ•°æ® | éœ€URLå‚æ•°                                                   |

### å¯è§†åŒ–ç«¯ç‚¹

| ç«¯ç‚¹                       | æ–¹æ³•  | æè¿°        |
|--------------------------|-----|-----------|
| /                        | GET | ä¸»é¡µ        |
| /health                  | GET | å¥åº·æ£€æŸ¥é¡µ     |
| /uuid/widget/view/{uuid} | GET | åµŒå…¥å¼å¿ƒç‡å±•ç¤ºç»„ä»¶ |

## ğŸ› ï¸ å®‰è£…è¿è¡Œ

### ç¯å¢ƒè¦æ±‚

* Go 1.24 æˆ–æ›´é«˜ç‰ˆæœ¬
* Redis
* Dockerï¼ˆå¯é€‰ï¼‰

### æœ¬åœ°è¿è¡Œ

1. å…‹éš†é¡¹ç›®ä»£ç ï¼š

```sh
    git clone https://github.com/xihan123/heart-rate-server.git
    cd heart-rate-server
```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼š

```sh
    cp .env.example .env
    # ç¼–è¾‘ .env æ–‡ä»¶ä»¥é…ç½®æ‚¨çš„ç¯å¢ƒå˜é‡
```

3. å®‰è£…ä¾èµ–ï¼š

```sh
    go mod download
 ```

4. å¯åŠ¨æœåŠ¡ï¼š

```sh
    go run main.go
```

### ä½¿ç”¨Dockerè¿è¡Œ

1. æ„å»ºDockeré•œåƒï¼š

```sh
    docker build -t heart-rate-server .
```

2. è¿è¡ŒDockerå®¹å™¨ï¼š

```sh
    docker run -d -p 8080:8080 --name heart-rate-server heart-rate-server
```

## [ç¤ºä¾‹æœåŠ¡åœ°å€](https://public-heart-rate-api.xihan.lat/)

ç®€å•æ³¨å†Œç™»å½•ä¸€ä¸‹å°±å¯ä»¥ç”¨äº†ï¼Œä¸è¿‡æ˜¯åŸºäºCFçš„ï¼Œå›½å†…é€Ÿåº¦å¯èƒ½å¾ˆæ…¢

**å¦å¤–å¼ºè°ƒä¸€ä¸‹ï¼Œè¿™ä¸ªåªæ˜¯ä¸ªä¾›æµ‹è¯•çš„æ¥å£æœåŠ¡ï¼Œæ²¡æœ‰æ¥å…¥ä»»ä½•æœºå™¨äºº
è¿™ä¸ªæœåŠ¡ç¨³å®šæ€§æ— æ³•ä¿è¯ï¼Œä¸è¦ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ï¼ï¼**

1. è¿›å…¥é¦–é¡µç‚¹ç«‹å³å¼€å§‹

![Image](https://github.com/user-attachments/assets/985e63da-0919-4871-8008-7ee77d904305)

2. ç‚¹å‡»ç™»å½•ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·(ä¸æƒ³æ³¨å†Œçš„ç”¨test:test123456ç™»å½•æµ‹è¯•ä¹Ÿè¡Œ
)

![Image](https://github.com/user-attachments/assets/06b76b7c-03fb-4115-9681-8abc4908d1f2)

3. - å¤åˆ¶`æ•°æ®ä¸ŠæŠ¥æ¥å£ (POST)`å†…å®¹ä¸º`https://public-heart-rate-api.xihan.lat/uuid/d7fc02ae-6973-4495-9fea-d7b877ab4329/receive_data`
    - å¡«å…¥[æ¨¡å—](https://github.com/xihan123/HeartRateHook)æ—¶è®°å¾—è¦å»æ‰`receive_data`
    - åªéœ€è¦å¡«å…¥`https://public-heart-rate-api.xihan.lat/uuid/d7fc02ae-6973-4495-9fea-d7b877ab4329/`å°±è¡Œ

![Image](https://github.com/user-attachments/assets/7f178fce-1a28-4342-b9eb-e83b1c3c320a)

4. (å¯é€‰)å…¬å¼€å¿ƒç‡æŸ¥çœ‹é¡µé¢æ˜¯ä¸ªå¯ä»¥ä¾›ç›´æ’­å±•ç¤ºå¿ƒç‡ç”¨çš„html

![Image](https://github.com/user-attachments/assets/aaefdb14-baf6-425c-be75-0d9b9ffaaaeb)

## ğŸ“„ è®¸å¯è¯

æ­¤é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºï¼Œè¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚
